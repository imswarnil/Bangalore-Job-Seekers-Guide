// File: _sass/_toc.scss
//
// Styles for the Table of Contents component, including the
// active state for the scroll-spy JavaScript.
// =============================================================================

// 1. Main container for the TOC.
// In your post layout, this is inside `<div class="l-post__toc toc">`
// which makes it a sticky sidebar on larger screens.
// -----------------------------------------------------------------------------
.toc {
  // Use theme variables for consistency if they exist, otherwise use sensible defaults.
  --toc-active-color: var(--spruce-base-color-primary, #e53935);
  --toc-text-color: var(--spruce-base-color-text, #555);
  --toc-heading-color: var(--spruce-base-color-heading, #111);
  --toc-hover-color: var(--spruce-base-color-link-hover, #c41c1c);
  --toc-border-color: var(--spruce-base-color-border, #e0e0e0);

  font-size: var(--spruce-font-size-sm, 0.9rem);
}


// 2. The "On this page" title.
// -----------------------------------------------------------------------------
.toc__title {
  font-family: var(--spruce-font-family-heading, sans-serif);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--toc-heading-color);
  margin-bottom: 1rem;
  border-bottom: 1px solid var(--toc-border-color);
  padding-bottom: 0.75rem;
}


// 3. The navigation list container.
// -----------------------------------------------------------------------------
.toc__navigation {
  // The ordered list for the TOC links
  ol {
    list-style: none;
    margin: 0;
    padding-left: 0.5rem; // Slight indent for the list
    border-left: 2px solid var(--toc-border-color);
  }

  // Individual list items
  li {
    margin: 0;
    padding: 0;

    // Add spacing between list items
    & + li {
      margin-top: 0.75rem;
    }
  }

  // The TOC links themselves
  a {
    display: block; // Make the entire area clickable
    color: var(--toc-text-color);
    text-decoration: none;
    padding: 0.25rem 0.75rem;
    border-radius: var(--spruce-border-radius-sm, 4px);
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-left-color 0.2s ease-in-out;
    border-left: 2px solid transparent; // Placeholder for the active state
    margin-left: -3px; // Align with the parent border

    &:hover {
      color: var(--toc-hover-color);
      background-color: hsla(0, 0%, 0%, 0.03);
    }
  }
}

// 4. The "is-active" state for Scroll-Spy
//    This is the most important part for the visual feedback.
// -----------------------------------------------------------------------------
.toc__navigation a.is-active {
  color: var(--toc-active-color);
  font-weight: 600; // Make the active link slightly bolder
  background-color: hsla(var(--spruce-base-color-primary), 0.05); // A very light background tint of the primary color
  
  // Highlight the left border to indicate the active item
  border-left-color: var(--toc-active-color);
}